; PlatformIO Project Configuration File
;
; Build options: build flags, source filter
; Upload options: custom upload port, speed and extra flags
; Library options: dependencies, extra library storages
; Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:sparkfun_promicro16]
platform = atmelavr
board = sparkfun_promicro16
framework = arduino

; Upload configuration
upload_port = /dev/ttyACM0
upload_speed = 57600
upload_protocol = avr109

; Monitor configuration
monitor_port = /dev/ttyACM0
monitor_speed = 115200

; Build flags
build_flags =
    -DARDUINO_AVR_PROMICRO
    -DUSB_VID=0x1B4F
    -DUSB_PID=0x9206

; Library dependencies
lib_deps =
    bblanchon/ArduinoJson@^6.21.3

; Note: I2Cdev and AK8975 libraries must be manually installed
; Clone https://github.com/jrowberg/i2cdevlib
; Copy Arduino/I2Cdev and Arduino/AK8975 to lib/ directory or global library path

; Library search path
lib_extra_dirs =
    ~/Arduino/libraries

; Source directory
src_dir = .

; Exclude pattern (prevent duplicate main() errors)
src_filter =
    +<mcu_4wd_tank.ino>
    -<.git/>
    -<.svn/>

; Board configuration
board_build.mcu = atmega32u4
board_build.f_cpu = 16000000L

; Serial port notes for Pro Micro:
; - Linux: Usually /dev/ttyACM0 or /dev/ttyUSB0
; - macOS: Usually /dev/cu.usbmodem* or /dev/tty.usbmodem*
; - Windows: Usually COM3 or higher
;
; If upload fails with "device not found":
; 1. Press reset button twice quickly to enter bootloader mode
; 2. Run: pio run --target upload within 8 seconds
; 3. Or use: upload_port = /dev/ttyACM0 (bootloader port)
